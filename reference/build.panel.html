<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>build.panel: Build PSID panel data set — build.panel â€¢ psidR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="build.panel: Build PSID panel data set — build.panel"><meta property="og:description" content="Builds a panel data set with id variables pid (unique person identifier) and year from individual PSID family files and supplemental wealth files."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psidR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/floswald/psidR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>build.panel: Build PSID panel data set</h1>
    <small class="dont-index">Source: <a href="https://github.com/floswald/psidR/blob/HEAD/R/build.panel.r" class="external-link"><code>R/build.panel.r</code></a></small>
    <div class="hidden name"><code>build.panel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Builds a panel data set with id variables <code>pid</code> (unique person identifier) and <code>year</code> from individual PSID family files and supplemental wealth files.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build.panel</span><span class="op">(</span></span>
<span>  datadir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">fam.vars</span>,</span>
<span>  ind.vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heads.only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  current.heads.only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sample <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  design <span class="op">=</span> <span class="st">"balanced"</span>,</span>
<span>  loglevel <span class="op">=</span> <span class="va">INFO</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>datadir</dt>
<dd><p>either <code>NULL</code>, in which case saves to tmpdir or path to directory containing family files ("FAMyyyy.RData") and individual file ("IND2009ER.RData").</p></dd>


<dt>fam.vars</dt>
<dd><p>data.frame of variable to retrieve from family files. Can contain see example for required format.</p></dd>


<dt>ind.vars</dt>
<dd><p>data.frame of variables to get from individual file. In almost all cases this will be the type of survey weights you want to use. don't include id variables ER30001 and ER30002.</p></dd>


<dt>heads.only</dt>
<dd><p>logical TRUE if user wants household heads only. Household heads in sample year.</p></dd>


<dt>current.heads.only</dt>
<dd><p>logical TRUE if user wants current household heads only. Distinguishes mover outs heads.</p></dd>


<dt>sample</dt>
<dd><p>string indicating which sample to select: "SRC" (survey research center), "SEO" (survey for economic opportunity), "immigrant" (immigrant sample), "latino" (Latino family sample). Defaults to NULL, so no subsetting takes place.</p></dd>


<dt>design</dt>
<dd><p>either character <em>balanced</em> or <em>all</em> or integer. <em>balanced</em> means only individuals who appear in each wave are considered. <em>All</em> means all are taken. An integer value stands for minimum consecutive years of participation, i.e. design=3 means present in at least 3 consecutive waves.</p></dd>


<dt>loglevel</dt>
<dd><p>one of INFO, WARN and DEBUG. INFO by default.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>resulting <code>data.table</code>. the variable <code>pid</code> is the unique person identifier, constructed from ID1968 and pernum</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are several supported approches. Approach one downloads stata data, uses stata to build each wave, then puts it together with `psidR`. The second (recommended) approach downloads all data directly from the psid servers (no Stata needed). For this approach you need to supply the precise names of psid variables - those variable names vary by year. E.g. <em>total family income</em> will have different names in different waves. The function <code><a href="getNamesPSID.html">getNamesPSID</a></code> greatly helps collecting names for all waves.</p>
    </div>
    <div id="merging">
    <h2>Merging</h2>
    

<p>The variables <code>interview number</code> in each family file map to 
the <code>interview number</code> variable of a given year in the individual file. Run <code>example(build.panel)</code> for a demonstration.</p>
    </div>
    <div id="supplements">
    <h2>Supplements</h2>
    

<p><em>Notice that support for wealth supplements is disabled!</em> Recent releases of the main family file have wealth data included. Earlier waves must be merged manually, again by variable <code>interview number</code> as above.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># ################################################</span></span></span>
<span class="r-in"><span><span class="co"># Real-world example: not run because takes long.</span></span></span>
<span class="r-in"><span><span class="co"># Build panel with income, wage, age and education</span></span></span>
<span class="r-in"><span><span class="co"># optionally: add wealth supplements!</span></span></span>
<span class="r-in"><span><span class="co"># ################################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The package is installed with a list of variables</span></span></span>
<span class="r-in"><span><span class="co"># Alternatively, search for names with \code{\link{getNamesPSID}}</span></span></span>
<span class="r-in"><span><span class="co"># This is the body of function build.psid()</span></span></span>
<span class="r-in"><span><span class="co"># (so why not call build.psid() and see what happens!)</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span>package<span class="op">=</span><span class="st">"psidR"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="va">small</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">=</span> <span class="fu">fread</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">r</span>,<span class="st">"psid-lists"</span>,<span class="st">"famvars-small.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">i</span> <span class="op">=</span> <span class="fu">fread</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">r</span>,<span class="st">"psid-lists"</span>,<span class="st">"indvars-small.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">f</span> <span class="op">=</span> <span class="fu">fread</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">r</span>,<span class="st">"psid-lists"</span>,<span class="st">"famvars.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">i</span> <span class="op">=</span> <span class="fu">fread</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">r</span>,<span class="st">"psid-lists"</span>,<span class="st">"indvars.txt"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">setkey</span><span class="op">(</span><span class="va">i</span>,<span class="st">"name"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">setkey</span><span class="op">(</span><span class="va">f</span>,<span class="st">"name"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">=</span> <span class="fu">dcast</span><span class="op">(</span><span class="va">i</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">year</span>,<span class="va">name</span>,<span class="va">variable</span><span class="op">)</span><span class="op">]</span>,<span class="va">year</span><span class="op">~</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">=</span> <span class="fu">dcast</span><span class="op">(</span><span class="va">f</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">year</span>,<span class="va">name</span>,<span class="va">variable</span><span class="op">)</span><span class="op">]</span>,<span class="va">year</span><span class="op">~</span><span class="va">name</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">d</span> <span class="op">=</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="st">"~/datasets/psid/"</span>,fam.vars<span class="op">=</span><span class="va">f</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">i</span>, </span></span>
<span class="r-in"><span>                 heads.only <span class="op">=</span><span class="cn">TRUE</span>,sample<span class="op">=</span><span class="st">"SRC"</span>,</span></span>
<span class="r-in"><span>                 design<span class="op">=</span><span class="st">"all"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">d</span>,file<span class="op">=</span><span class="st">"~/psid.RData"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ######################################</span></span></span>
<span class="r-in"><span><span class="co"># reproducible example on artifical data. </span></span></span>
<span class="r-in"><span><span class="co"># run this with example(build.panel).</span></span></span>
<span class="r-in"><span><span class="co"># ######################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## make reproducible family data sets for 2 years</span></span></span>
<span class="r-in"><span><span class="co">## variables are: family income (Money) and age</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Data acquisition step:</span></span></span>
<span class="r-in"><span><span class="co">## run build.panel with sascii=TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># testPSID creates artifical PSID data</span></span></span>
<span class="r-in"><span><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="testPSID.html">testPSID</a></span><span class="op">(</span>N<span class="op">=</span><span class="fl">12</span>,N.attr<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fam1985</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">famvars1985</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fam1986</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">famvars1986</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">IND2019ER</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">IND2019ER</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a temporary datadir</span></span></span>
<span class="r-in"><span><span class="va">my.dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#save those in the datadir</span></span></span>
<span class="r-in"><span><span class="co"># notice different R formats admissible</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">fam1985</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1985ER.rda"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">fam1986</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1986ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">IND2019ER</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/IND2019ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## end Data acquisition step.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now define which famvars</span></span></span>
<span class="r-in"><span><span class="va">famvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1985</span>,<span class="fl">1986</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      money<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Money85"</span>,<span class="st">"Money86"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      age<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age85"</span>,<span class="st">"age86"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create ind.vars</span></span></span>
<span class="r-in"><span><span class="va">indvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1985</span>,<span class="fl">1986</span><span class="op">)</span>,ind.weight<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ER30497"</span>,<span class="st">"ER30534"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># call the builder</span></span></span>
<span class="r-in"><span><span class="co"># data will contain column "relation.head" holding the relationship code.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,</span></span>
<span class="r-in"><span>                 heads.only<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] everything already downloaded. Build dataset now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: loaded individual file: /tmp/Rtmp4u6qsd/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] balanced design reduces sample from 36 to 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] End of build.panel</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># see what happens if we drop non-heads</span></span></span>
<span class="r-in"><span><span class="co"># only the ones who are heads in BOTH years </span></span></span>
<span class="r-in"><span><span class="co"># are present (since design='balanced' by default)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,</span></span>
<span class="r-in"><span>                 heads.only<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] everything already downloaded. Build dataset now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: loaded individual file: /tmp/Rtmp4u6qsd/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] dropping non-heads leaves 14 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] dropping non-heads leaves 10 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] balanced design reduces sample from 17 to 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] End of build.panel</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">pid</span><span class="op">)</span><span class="op">]</span>,nrow<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         money age interview ID1968 pernum sequence relation.head ind.weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 112539.767  60         8   2773     11       20            10 0.06262170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 112999.802  61        23   2773     11       20            10 0.14885524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:   5481.393  26        24   5652      7        1            10 0.16406890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:   5944.751  27        11   5652      7        1            10 0.07071854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:  20253.508  39        15   6332     19        1            10 0.05007392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:  20762.808  40        15   6332     19       20            10 0.61789926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7:  28753.379  47        20   7574      9       20            10 0.98589330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8:  29280.937  48        16   7574      9        1            10 0.16746839</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        pid year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 2773011 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 2773011 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 5652007 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 5652007 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: 6332019 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: 6332019 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7: 7574009 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8: 7574009 1986</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># change sample design to "all": </span></span></span>
<span class="r-in"><span><span class="co"># we'll keep individuals if they are head in one year,</span></span></span>
<span class="r-in"><span><span class="co"># and drop in the other</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,heads.only<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                 design<span class="op">=</span><span class="st">"all"</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] everything already downloaded. Build dataset now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: loaded individual file: /tmp/Rtmp4u6qsd/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] dropping non-heads leaves 14 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] dropping non-heads leaves 10 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2022-07-14 08:43:20] End of build.panel</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">pid</span><span class="op">)</span><span class="op">]</span>,nrow<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          money age interview ID1968 pernum sequence relation.head ind.weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  13121.005  21        19   2248      5        1            10 0.29350130</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 112539.767  60         8   2773     11       20            10 0.06262170</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 112999.802  61        23   2773     11       20            10 0.14885524</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:  12317.814  76         8   3142     24        1            10 0.32997083</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:   9082.691  26        13   3728     15        1            10 0.30773104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  43419.757  35        18   3881     13        1            10 0.18911950</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  12697.017  74        10   5231      3        1            10 0.87676085</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  44912.794  52        21   5547     21        1            10 0.93575104</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:   5481.393  26        24   5652      7        1            10 0.16406890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:   5944.751  27        11   5652      7        1            10 0.07071854</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:   9710.608  63         6   6142     20        1            10 0.81243180</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  20253.508  39        15   6332     19        1            10 0.05007392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:  20762.808  40        15   6332     19       20            10 0.61789926</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:  29249.320  77        17   7067      6        1            10 0.96214977</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:  28753.379  47        20   7574      9       20            10 0.98589330</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16:  29280.937  48        16   7574      9        1            10 0.16746839</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:   3606.359  64         9   7613     22        1            10 0.40040638</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         pid year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1: 2248005 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 2773011 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 2773011 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 3142024 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 3728015 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 3881013 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 5231003 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 5547021 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 5652007 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 5652007 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 6142020 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 6332019 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 6332019 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 7067006 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 7574009 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 7574009 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 7613022 1985</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1985ER.rda"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1986ER.RData"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/IND2019ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># END psidR example</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># #####################################################################</span></span></span>
<span class="r-in"><span><span class="co"># Please go to https://github.com/floswald/psidR for more example usage</span></span></span>
<span class="r-in"><span><span class="co"># #####################################################################</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Florian Oswald.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer></div>

  


  

  </body></html>

