<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>build.panel: Build PSID panel data set — build.panel • psidR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="build.panel: Build PSID panel data set — build.panel"><meta property="og:description" content="Builds a panel data set with id variables pid (unique person identifier) and year from individual PSID family files and supplemental wealth files."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">psidR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/floswald/psidR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>build.panel: Build PSID panel data set</h1>
    <small class="dont-index">Source: <a href="https://github.com/floswald/psidR/blob/master/R/build.panel.r" class="external-link"><code>R/build.panel.r</code></a></small>
    <div class="hidden name"><code>build.panel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Builds a panel data set with id variables <code>pid</code> (unique person identifier) and <code>year</code> from individual PSID family files and supplemental wealth files.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">build.panel</span><span class="op">(</span></span>
<span>  datadir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">fam.vars</span>,</span>
<span>  ind.vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  heads.only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  current.heads.only <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  sample <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  design <span class="op">=</span> <span class="st">"balanced"</span>,</span>
<span>  loglevel <span class="op">=</span> <span class="va">INFO</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-datadir">datadir<a class="anchor" aria-label="anchor" href="#arg-datadir"></a></dt>
<dd><p>either <code>NULL</code>, in which case saves to tmpdir or path to directory containing family files ("FAMyyyy.RData") and individual file ("IND2009ER.RData").</p></dd>


<dt id="arg-fam-vars">fam.vars<a class="anchor" aria-label="anchor" href="#arg-fam-vars"></a></dt>
<dd><p>data.frame of variable to retrieve from family files. Can contain see example for required format.</p></dd>


<dt id="arg-ind-vars">ind.vars<a class="anchor" aria-label="anchor" href="#arg-ind-vars"></a></dt>
<dd><p>data.frame of variables to get from individual file. In almost all cases this will be the type of survey weights you want to use. don't include id variables ER30001 and ER30002.</p></dd>


<dt id="arg-heads-only">heads.only<a class="anchor" aria-label="anchor" href="#arg-heads-only"></a></dt>
<dd><p>logical TRUE if user wants household heads only. Household heads in sample year.</p></dd>


<dt id="arg-current-heads-only">current.heads.only<a class="anchor" aria-label="anchor" href="#arg-current-heads-only"></a></dt>
<dd><p>logical TRUE if user wants current household heads only. Distinguishes mover outs heads.</p></dd>


<dt id="arg-sample">sample<a class="anchor" aria-label="anchor" href="#arg-sample"></a></dt>
<dd><p>string indicating which sample to select: "SRC" (survey research center), "SEO" (survey for economic opportunity), "immigrant" (immigrant sample), "latino" (Latino family sample). Defaults to NULL, so no subsetting takes place.</p></dd>


<dt id="arg-design">design<a class="anchor" aria-label="anchor" href="#arg-design"></a></dt>
<dd><p>either character <em>balanced</em> or <em>all</em> or integer. <em>balanced</em> means only individuals who appear in each wave are considered. <em>All</em> means all are taken. An integer value stands for minimum consecutive years of participation, i.e. design=3 means present in at least 3 consecutive waves.</p></dd>


<dt id="arg-loglevel">loglevel<a class="anchor" aria-label="anchor" href="#arg-loglevel"></a></dt>
<dd><p>one of INFO, WARN and DEBUG. INFO by default.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>resulting <code>data.table</code>. the variable <code>pid</code> is the unique person identifier, constructed from ID1968 and pernum</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are several supported approches. Approach one downloads stata data, uses stata to build each wave, then puts it together with `psidR`. The second (recommended) approach downloads all data directly from the psid servers (no Stata needed). For this approach you need to supply the precise names of psid variables - those variable names vary by year. E.g. <em>total family income</em> will have different names in different waves. The function <code><a href="getNamesPSID.html">getNamesPSID</a></code> greatly helps collecting names for all waves.</p>
    </div>
    <div id="merging">
    <h2>Merging</h2>


<p>The variables <code>interview number</code> in each family file map to
the <code>interview number</code> variable of a given year in the individual file. Run <code>example(build.panel)</code> for a demonstration.</p>
    </div>
    <div id="supplements">
    <h2>Supplements</h2>


<p><em>Notice that support for wealth supplements is disabled!</em> Recent releases of the main family file have wealth data included. Earlier waves must be merged manually, again by variable <code>interview number</code> as above.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ######################################</span></span></span>
<span class="r-in"><span><span class="co"># reproducible example on artifical data. </span></span></span>
<span class="r-in"><span><span class="co"># run this with example(build.panel).</span></span></span>
<span class="r-in"><span><span class="co"># ######################################</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## make reproducible family data sets for 2 years</span></span></span>
<span class="r-in"><span><span class="co">## variables are: family income (Money) and age</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Data acquisition step:</span></span></span>
<span class="r-in"><span><span class="co">## run build.panel with sascii=TRUE</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># testPSID creates artifical PSID data</span></span></span>
<span class="r-in"><span><span class="va">td</span> <span class="op">&lt;-</span> <span class="fu"><a href="testPSID.html">testPSID</a></span><span class="op">(</span>N<span class="op">=</span><span class="fl">12</span>,N.attr<span class="op">=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fam1985</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">famvars1985</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fam1986</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">famvars1986</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">IND2019ER</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/copy.html" class="external-link">copy</a></span><span class="op">(</span><span class="va">td</span><span class="op">$</span><span class="va">IND2019ER</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create a temporary datadir</span></span></span>
<span class="r-in"><span><span class="va">my.dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co">#save those in the datadir</span></span></span>
<span class="r-in"><span><span class="co"># notice different R formats admissible</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">fam1985</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1985ER.rda"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">fam1986</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1986ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span><span class="va">IND2019ER</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/IND2019ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## end Data acquisition step.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># now define which famvars</span></span></span>
<span class="r-in"><span><span class="va">famvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1985</span>,<span class="fl">1986</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      money<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Money85"</span>,<span class="st">"Money86"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                      age<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age85"</span>,<span class="st">"age86"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create ind.vars</span></span></span>
<span class="r-in"><span><span class="va">indvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>year<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1985</span>,<span class="fl">1986</span><span class="op">)</span>,ind.weight<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ER30497"</span>,<span class="st">"ER30534"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># call the builder</span></span></span>
<span class="r-in"><span><span class="co"># data will contain column "relation.head" holding the relationship code.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,</span></span>
<span class="r-in"><span>                 heads.only<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] Will download missing datasets now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] will download latest individual index: IND2021ER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This can take several hours/days to download.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  want to go ahead? give me 'yes' or 'no'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: loaded individual file: /tmp/RtmpChTsL3/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] balanced design reduces sample from 36 to 24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] End of build.panel</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># see what happens if we drop non-heads</span></span></span>
<span class="r-in"><span><span class="co"># only the ones who are heads in BOTH years </span></span></span>
<span class="r-in"><span><span class="co"># are present (since design='balanced' by default)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,</span></span>
<span class="r-in"><span>                 heads.only<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] Will download missing datasets now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] will download latest individual index: IND2021ER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This can take several hours/days to download.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  want to go ahead? give me 'yes' or 'no'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: loaded individual file: /tmp/RtmpChTsL3/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] dropping non-heads leaves 10 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] dropping non-heads leaves 15 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] balanced design reduces sample from 20 to 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] End of build.panel</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">pid</span><span class="op">)</span><span class="op">]</span>,nrow<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       money   age interview ID1968 pernum sequence relation.head ind.weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;num&gt; &lt;int&gt;     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;    &lt;num&gt;         &lt;num&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 78485.75    31         2   1197     14        1            10  0.2986580</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 78942.81    32         8   1197     14       20            10  0.4353866</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 16170.57    61        24   8981      1       20            10  0.0959265</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 16643.49    62        18   8981      1        1            10  0.9068795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        pid  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 1197014  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 1197014  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 8981001  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 8981001  1986</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># change sample design to "all": </span></span></span>
<span class="r-in"><span><span class="co"># we'll keep individuals if they are head in one year,</span></span></span>
<span class="r-in"><span><span class="co"># and drop in the other</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">build.panel</span><span class="op">(</span>datadir<span class="op">=</span><span class="va">my.dir</span>,fam.vars<span class="op">=</span><span class="va">famvars</span>,</span></span>
<span class="r-in"><span>                 ind.vars<span class="op">=</span><span class="va">indvars</span>,heads.only<span class="op">=</span><span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                 design<span class="op">=</span><span class="st">"all"</span><span class="op">)</span>  </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1985ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] found FAM1986ER.rda already downloaded</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] Will download missing datasets now</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] will download latest individual index: IND2021ER</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This can take several hours/days to download.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  want to go ahead? give me 'yes' or 'no'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: Loading Family data from .rda files</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: loaded individual file: /tmp/RtmpChTsL3/IND2019ER.RData</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: total memory load in MB: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] dropping non-heads leaves 10 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] psidR: currently working on data for year 1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] dropping non-heads leaves 15 obs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> INFO [2024-11-07 16:01:08] End of build.panel</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">d</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="va">pid</span><span class="op">)</span><span class="op">]</span>,nrow<span class="op">=</span><span class="cn">Inf</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          money   age interview ID1968 pernum sequence relation.head ind.weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt; &lt;int&gt;     &lt;int&gt;  &lt;int&gt;  &lt;int&gt;    &lt;num&gt;         &lt;num&gt;      &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  56624.775    62        15    485     18        1            10 0.09403037</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:  78485.745    31         2   1197     14        1            10 0.29865803</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:  78942.807    32         8   1197     14       20            10 0.43538664</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:  21502.318    61         1   1431      5        1            10 0.55247234</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:   7093.813    61         4   2111      2       20            10 0.17235189</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:  10547.023    38        12   2508      7        1            10 0.20403065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:  11519.488    64        24   3197     10        1            10 0.12649262</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:  31686.708    46         7   3559     12       20            10 0.12585627</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 106183.879    45        11   3927     17        1            10 0.17861309</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:   4156.180    41        19   4903     19        1            10 0.03102602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11:   6638.331    21         3   5517     23       20            10 0.77829279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12:  21908.241    67         7   5536     13        1            10 0.83644625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13:  29156.657    63        17   5898      3        1            10 0.66609201</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14:  20408.597    40         2   6791     21        1            10 0.88571080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15:  16549.515    43        23   6871     20       20            10 0.38709628</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 141303.199    77         5   7070     11        1            10 0.20390068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17:  20482.871    28        10   7555      6       20            10 0.60536844</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18:  16170.575    61        24   8981      1       20            10 0.09592650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19:  16643.490    62        18   8981      1        1            10 0.90687946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20:  16313.029    79        22   9047      8        1            10 0.54859144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          money   age interview ID1968 pernum sequence relation.head ind.weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         pid  year</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;num&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:  485018  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2: 1197014  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3: 1197014  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4: 1431005  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5: 2111002  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6: 2508007  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7: 3197010  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8: 3559012  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9: 3927017  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10: 4903019  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11: 5517023  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12: 5536013  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13: 5898003  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14: 6791021  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15: 6871020  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16: 7070011  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17: 7555006  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18: 8981001  1985</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19: 8981001  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20: 9047008  1986</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         pid  year</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1985ER.rda"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/FAM1986ER.RData"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">my.dir</span>,<span class="st">"/IND2019ER.RData"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># END psidR example</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># #####################################################################</span></span></span>
<span class="r-in"><span><span class="co"># Please go to https://github.com/floswald/psidR for more example usage</span></span></span>
<span class="r-in"><span><span class="co"># #####################################################################</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Florian Oswald.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

